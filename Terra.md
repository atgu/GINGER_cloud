# What is Terra?
We use it as a data delivery service in the cloud. This how NeuroGAP genetic and phenotypic data are distributed. To get started, go to: https://app.terra.bio/#workspaces. 
You should see something like this:

![](img/Terra/Terra%20main%20page.png)

## Workspaces and permissions
Workspaces have permissions associated with them, much like on a computing cluster. Some workspaces are completely public, especially public resources like high coverage <a href="https://app.terra.bio/#workspaces/anvil-datastorage/1000G-high-coverage-2019">1000 Genomes Project data</a>. Others, like the NeuroGAP data, have restricted access to specific users (default for individual-level genetic and phenotypic data). Your access is given through your Google-enabled email address (most likely your [user]@broadinstitute.org address).

#### 1000 Genomes Project workspace
We'll start with the 1000 Genomes Project workspace (<a href="https://app.terra.bio/#workspaces/anvil-datastorage/1000G-high-coverage-2019">here</a>) to show all the utilities of a fully featured workspace. The landing page looks like this:

![](img/Terra/Terra%201kG%20workspace%20landing%20page.png)

The landing page should give you some description of the dataset. There are two red boxes around the important parts of this page that we use. The other relevant top menu bar (Data) provides information about each sample. For example:

![](img/Terra/Terra%201kG%20workspace%20data%20page.png)

The sample table is typically the only one that is complete. We usually just download the sample information as a `.tsv` file using the "Download all rows" button. (That is often the extent of our interaction with sample information in Terra.)

Now back on the Dashboard, you can see where the data actual lives in a google bucket. The clipboard copies the link (allowing `gsutil` and command line access), and the "Open in browser" button allows you to interact with the bucket using the web interface, like this:

![](img/Terra/Terra%201kG%20google%20bucket%20link%20out.png)

You can click on the folders and navigate deeper in, just like on your own computer. You will see that path completing as you navigate around. Learn more about this in [the Cloud Console tutorial](Console.md).

#### NeuroGAP phenotype workspace

The latest freeze of the NeuroGAP phenotype data is in a Terra workspace. We have also copied this data into a separate Google cloud project that we will be doing some basic analyses in. This workspace is simpler and has fewer features enabled. The main one is the Google bucket where you can download the data. Notice that this bucket has a different name than the bucket containing the 1000 Genomes Project data. 
![](img/Terra/Terra%20NeuroGAP%20phenos%20landing%20page.png)

If we go to the `Data` tab for this workspace, we cannot click on most tabs. Only the `Files` tab is enabled, as follows:

![](img/Terra/Terra%20NeuroGAP%20phenos%20data%20page.png)

#### NeuroGAP genotype workspace

The most common type of data we access through Terra is genotyping or sequencing data. A workspace called `NeuroGap_Koenen_Akena_Uganda_GSA-MD_v1_3` has raw genotype pilot data from Makerere University that were generated by the Broad Genomics Platform, as follows:

![](img/Terra/Terra%20NeuroGAP%20Uganda%20genos%20landing%20page.png)

In these cases, the `Data` tab becomes a lot more important. There is a lot of information here, and it is hard to gather summaries from the Terra table interface alone. Now it is much more important to download all rows as a `.tsv` file to make sense of your data, understand and/or re-map sample ID's, gather information about reported sex or gender, and see any QC information that might already be available. This is summarized in the table as follows:

![](img/Terra/Terra%20NeuroGAP%20Uganda%20genos%20data%20page.png)

Typically, we download this file and load it into R, then generate summaries of our data before doing any analysis.

#### GINGERIIMAK

You have access to this workspace, which has a combination of the genetic and phenotypic datasets described above. We have compiled the genotype data from not just Uganda, but from all sites participating in NeuroGAP. This merged dataset has also been QC'd. When you open the workspace, it looks like this:

![](img/Terra/Terra%20gingeriimak%20landing%20page.png)

Because it has multiple datasets, the `Data` tab is a little less informative, but you can see the breadth of information included in the workspace:

![](img/Terra/Terra%20gingeriimak%20data%20page.png) 

### Another note about permissions

Project managers typically set up and maintain permissions across Terra workspaces. If you are working in a Google Cloud Project, you or the project will need permission to read the data in the Terra workspace (likely from the help of a project manager). If you are running analysis with files from multiple Google cloud projects, this will also require some configuration of permissions.
